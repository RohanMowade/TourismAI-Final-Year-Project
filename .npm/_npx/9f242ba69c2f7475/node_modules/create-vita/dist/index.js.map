{"version":3,"sources":["../src/index.js","../package.json"],"sourcesContent":["#!/usr/bin/env bun\n\nimport { Command, Option } from \"commander\";\nimport degit from \"degit\";\nimport prompts from \"prompts\";\nimport packageJson from \"../package.json\";\n\nprocess.on(\"SIGINT\", () => process.exit(0));\nprocess.on(\"SIGTERM\", () => process.exit(0));\n\nasync function main() {\n  const program = new Command();\n\n  program\n    .name(\"create-vita\")\n    .description(\"Scaffold a new Vite + Alpine.js project\")\n    .argument(\"[project-name]\", \"name of the project folder\")\n    .addOption(new Option(\"--with-jsxpine\", \"add jsxpine ui reusable components\"))\n    .version(\n      packageJson.version || \"1.0.0\",\n      \"-v, --version\",\n      \"display the version number\"\n    )\n    .action(\n      /**\n       * Create a new Vite + TSX + Alpine.js project\n       * @param {string} projectName name of the project folder\n       * @param {object} options options\n       * @param {boolean} options.withJsxpine add jsxpine ui reusable components\n       */\n      async (projectName, options) => {\n        let withJsxpine = options?.withJsxpine ?? false;\n\n        // Ask for project name if not provided\n        if (!projectName) {\n          const res = await prompts({\n            type: \"text\",\n            name: \"name\",\n            message: \"Project name:\",\n            initial: \"my-vite-alpine-app\",\n          });\n          projectName = res.name;\n        }\n\n        // Add jsxpine ui reusable components\n        if (!options?.withJsxpine) {\n          const res = /** @type {{ withJsxpine: boolean }} */ (await prompts({\n            type: \"confirm\",\n            name: \"withJsxpine\",\n            message: \"Add jsxpine ui reusable components?\",\n            initial: false,\n          }));\n          withJsxpine = res.withJsxpine;\n        }\n\n        // Clone the starter template\n        const repo = `billybillydev/create-vita/apps/${\n          withJsxpine ? \"jsxpine-\" : \"\"\n        }starter`;\n\n        const emitter = degit(repo, {\n          cache: false,\n          force: true,\n          verbose: true,\n        });\n\n        await emitter.clone(projectName);\n\n        // Remove bun.lockb\n        const bunLockFile = Bun.file(\n          `${process.cwd()}/${projectName}/bun.lockb`\n        );\n        if (await bunLockFile.exists()) {\n          await bunLockFile.delete();\n        }\n\n        // Update package.json name\n        const pkgPath = `${process.cwd()}/${projectName}/package.json`;\n        const pkgFile = Bun.file(pkgPath);\n\n        if (await pkgFile.exists()) {\n          const pkg = JSON.parse(await pkgFile.text(), \"utf-8\");\n          pkg.name = projectName;\n\n          await Bun.write(pkgPath, JSON.stringify(pkg, null, 2));\n        }\n\n        console.log(`\\nâœ… Done!`);\n        console.log(`\\nNext steps:\\n`);\n        console.log(`cd ${projectName}`);\n        console.log(`npm install`);\n        console.log(`npm run dev\\n`);\n      }\n    );\n  program.parse(process.argv);\n}\n\nmain();\n","{\n  \"name\": \"create-vita\",\n  \"description\": \"Scaffold a new Vite + TSX + Alpine.js project\",\n  \"type\": \"module\",\n  \"version\": \"1.1.0\",\n  \"publishConfig\": {\n    \"access\": \"public\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/billybillydev/create-vita.git\",\n    \"directory\": \"packages/cli\"\n  },\n  \"scripts\": {\n    \"start\": \"bun run dist/index.js\",\n    \"build:watch\": \"tsup --watch\",\n    \"build\": \"tsup\",\n    \"pub:release\": \"bun publish --provenance --access public\"\n  },\n  \"exports\": \"./dist/index.js\",\n  \"bin\": {\n    \"create-vita\": \"dist/index.js\"\n  },\n  \"devDependencies\": {\n    \"@types/bun\": \"latest\",\n    \"tsup\": \"^8.4.0\"\n  },\n  \"peerDependencies\": {\n    \"typescript\": \"^5.0.0\"\n  },\n  \"dependencies\": {\n    \"bun\": \"^1.2.7\",\n    \"commander\": \"^13.1.0\",\n    \"degit\": \"^2.8.4\",\n    \"prompts\": \"^2.4.2\"\n  }\n}"],"mappings":";;;AAEA,SAAS,SAAS,cAAc;AAChC,OAAO,WAAW;AAClB,OAAO,aAAa;;;ACJpB;AAAA,EACE,MAAQ;AAAA,EACR,aAAe;AAAA,EACf,MAAQ;AAAA,EACR,SAAW;AAAA,EACX,eAAiB;AAAA,IACf,QAAU;AAAA,EACZ;AAAA,EACA,YAAc;AAAA,IACZ,MAAQ;AAAA,IACR,KAAO;AAAA,IACP,WAAa;AAAA,EACf;AAAA,EACA,SAAW;AAAA,IACT,OAAS;AAAA,IACT,eAAe;AAAA,IACf,OAAS;AAAA,IACT,eAAe;AAAA,EACjB;AAAA,EACA,SAAW;AAAA,EACX,KAAO;AAAA,IACL,eAAe;AAAA,EACjB;AAAA,EACA,iBAAmB;AAAA,IACjB,cAAc;AAAA,IACd,MAAQ;AAAA,EACV;AAAA,EACA,kBAAoB;AAAA,IAClB,YAAc;AAAA,EAChB;AAAA,EACA,cAAgB;AAAA,IACd,KAAO;AAAA,IACP,WAAa;AAAA,IACb,OAAS;AAAA,IACT,SAAW;AAAA,EACb;AACF;;;AD7BA,QAAQ,GAAG,UAAU,MAAM,QAAQ,KAAK,CAAC,CAAC;AAC1C,QAAQ,GAAG,WAAW,MAAM,QAAQ,KAAK,CAAC,CAAC;AAE3C,eAAe,OAAO;AACpB,QAAM,UAAU,IAAI,QAAQ;AAE5B,UACG,KAAK,aAAa,EAClB,YAAY,yCAAyC,EACrD,SAAS,kBAAkB,4BAA4B,EACvD,UAAU,IAAI,OAAO,kBAAkB,oCAAoC,CAAC,EAC5E;AAAA,IACC,gBAAY,WAAW;AAAA,IACvB;AAAA,IACA;AAAA,EACF,EACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOC,OAAO,aAAa,YAAY;AAC9B,UAAI,cAAc,SAAS,eAAe;AAG1C,UAAI,CAAC,aAAa;AAChB,cAAM,MAAM,MAAM,QAAQ;AAAA,UACxB,MAAM;AAAA,UACN,MAAM;AAAA,UACN,SAAS;AAAA,UACT,SAAS;AAAA,QACX,CAAC;AACD,sBAAc,IAAI;AAAA,MACpB;AAGA,UAAI,CAAC,SAAS,aAAa;AACzB,cAAM;AAAA;AAAA,UAA+C,MAAM,QAAQ;AAAA,YACjE,MAAM;AAAA,YACN,MAAM;AAAA,YACN,SAAS;AAAA,YACT,SAAS;AAAA,UACX,CAAC;AAAA;AACD,sBAAc,IAAI;AAAA,MACpB;AAGA,YAAM,OAAO,kCACX,cAAc,aAAa,EAC7B;AAEA,YAAM,UAAU,MAAM,MAAM;AAAA,QAC1B,OAAO;AAAA,QACP,OAAO;AAAA,QACP,SAAS;AAAA,MACX,CAAC;AAED,YAAM,QAAQ,MAAM,WAAW;AAG/B,YAAM,cAAc,IAAI;AAAA,QACtB,GAAG,QAAQ,IAAI,CAAC,IAAI,WAAW;AAAA,MACjC;AACA,UAAI,MAAM,YAAY,OAAO,GAAG;AAC9B,cAAM,YAAY,OAAO;AAAA,MAC3B;AAGA,YAAM,UAAU,GAAG,QAAQ,IAAI,CAAC,IAAI,WAAW;AAC/C,YAAM,UAAU,IAAI,KAAK,OAAO;AAEhC,UAAI,MAAM,QAAQ,OAAO,GAAG;AAC1B,cAAM,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,GAAG,OAAO;AACpD,YAAI,OAAO;AAEX,cAAM,IAAI,MAAM,SAAS,KAAK,UAAU,KAAK,MAAM,CAAC,CAAC;AAAA,MACvD;AAEA,cAAQ,IAAI;AAAA,aAAW;AACvB,cAAQ,IAAI;AAAA;AAAA,CAAiB;AAC7B,cAAQ,IAAI,MAAM,WAAW,EAAE;AAC/B,cAAQ,IAAI,aAAa;AACzB,cAAQ,IAAI;AAAA,CAAe;AAAA,IAC7B;AAAA,EACF;AACF,UAAQ,MAAM,QAAQ,IAAI;AAC5B;AAEA,KAAK;","names":[]}